<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karol Camp</title>

    <link href="Content/bootstrap.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-2.0.3.min.js"></script>
    <script src="Scripts/knockout-2.2.1.js"></script>
    <script src="Scripts/knockout-2.2.1.debug.js"></script>
    <script src="Scripts/bootstrap.min.js"></script>
    <script src="Scripts/sammy-0.7.4.min.js"></script>
    <script src="Scripts/require.js"></script>

</head>
<body>
    <div id="loader" class="alert alert-info" style="position: absolute; top: 5px; left: 50%; z-index: 10000; display: none; height: 44px;">
        <h4>Aguarde...</h4>
    </div>
    <div class="navbar navbar-default navbar-static-top">
        <div class="container">
            <div class="navbar-header">

                <a class="navbar-brand" href="#/">Karol Camp - SPA</a>
            </div>

            <div class="collapse navbar-collapse header-collapse" data-bind="if: logado">
                <ul class="nav navbar-nav">
                    <li><a href="#/trilha">Trilha</a></li>
                    <li><a href="#/sala">Sala</a></li>
                    <li><a href="#/palestrante">Palestrante</a></li>
                    <li><a href="#/palestra">Palestra</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span data-bind="text: usuario"></span> <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Editar Perfil</a></li>
                            <li class="divider"></li>
                            <li><a href="javascript:;" data-bind="click: clearAccessToken">Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container" id="conteudo">

    </div>
    
    <footer>
        <p class="navbar-text navbar-right">Código fonte em <a href="https://github.com/cleytonferrari/karolcamp" target="_blank">GitHub</a></p>
    </footer>
    <script type="text/javascript">

        window.logado = ko.observable(sessionStorage["accessToken"] || localStorage["accessToken"]);
        window.usuario = ko.observable(sessionStorage["usuario"] || localStorage["usuario"]);

        function clearAccessToken() {
            localStorage.removeItem("accessToken");
            sessionStorage.removeItem("accessToken");
            localStorage.removeItem("usuario");
            sessionStorage.removeItem("usuario");
            logado(false);
            usuario('');

            location.replace('#/login');
        };
        
        (function () {
            require(["main.js"], function () {
                require(["router"]);
            });
        })();
    </script>

</body>
</html>